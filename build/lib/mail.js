import nodemailer from 'nodemailer';
import { getState } from '../api/filesystem.js';
import { downloadFile } from '../api/supabase.js';
export async function downloadHTML(projectName, marketo) {
    const { data, error } = await downloadFile(projectName, 'html', marketo);
    return { data, error };
}
export async function mailHTML(recipients, htmlString) {
    const state = await getState();
    const Transporter = nodemailer.createTransport({
        host: state.host[0],
        port: 587,
        secure: false,
        auth: {
            user: state.id[0],
            pass: state.password[0],
        },
    });
    let info = await Transporter.sendMail({
        from: `Mailer Tester ${state.id[0]}`,
        to: recipients,
        subject: "Mailer test",
        text: "This is a test generated by Mailer...",
        html: htmlString,
    });
    return info;
}
;
